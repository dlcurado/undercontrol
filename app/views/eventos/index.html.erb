<div id="filters">
  <%= form_tag(eventos_path, method: "get") do %>
	<%= text_field_tag :nome, 'Nome' , class: "combo_autocomplete", value: params[:nome].nil? ? 'Nome' : params[:nome] %>
	<%= text_field_tag :data_evento, 'Data do evento', class: "datepicker", value: params[:data_evento].nil? ? 'Data do evento' : params[:data_evento] %>
	<%= select_tag(:evento_status, options_from_collection_for_select(Evento::STATUS, :first, :last), {prompt: 'Status do evento'} ) %>
	<%= submit_tag "Filtrar" %>
  <% end %>
</div>

<br />

<div id="results">

  <table border='1'>
	<tr>
	  <th>Cliente</td>
	  <th>Data</td>
	  <th>Local</td>
	  <th>Tipo de Evento</td>
	  <th>Status</th>
	  <th>Proposta</th>
	  <th>Último Contato em</th>
	  <th>Histórico</th>
	  <th>Editar</td>
	  <th>Desativar</td>
	</tr>

	<% @eventos.each do |evento| %>
	  <tr bgcolor="<%= evento.cor_fundo %>">
		<td><%= evento.cliente.nome %></td>
		<td><%= evento.data %></td>

		<% if evento.local.nil? %>
			<td>"Não definido"</td>
		<% else %>
			<td><%= evento.local.nome %></td>
		<% end %>

		<td><%= evento.tipo_evento.descricao %></td>
		<td><%= Evento::STATUS[evento.evento_status] %></td>
		<td>000000</td>
		<td><%= evento.data_ultimo_contato%></td>
		<td><%= link_to 'Ver histórico', evento_path(evento) %></td>
		<td><%= link_to 'Editar', edit_evento_path(evento) %></td>
		<td><%= link_to 'Desativar', evento_path(evento), 
				method: :delete,
				data: { confirm: 'Tem certeza que deseja excluir este evento?' }  %></td>
	  </tr>
	<% end %>
  </table>

<div>